\hypertarget{eccx08__eckey__meth_8c}{}\section{C\+:/\+Source/\+Git\+Lab/\+Ca\+Sw/\+Open\+S\+S\+L/atmel-\/ecc/engine\+\_\+atecc/engine\+\_\+meth/eccx08\+\_\+eckey\+\_\+meth.c File Reference}
\label{eccx08__eckey__meth_8c}\index{C\+:/\+Source/\+Git\+Lab/\+Ca\+Sw/\+Open\+S\+S\+L/atmel-\/ecc/engine\+\_\+atecc/engine\+\_\+meth/eccx08\+\_\+eckey\+\_\+meth.\+c@{C\+:/\+Source/\+Git\+Lab/\+Ca\+Sw/\+Open\+S\+S\+L/atmel-\/ecc/engine\+\_\+atecc/engine\+\_\+meth/eccx08\+\_\+eckey\+\_\+meth.\+c}}


Implementation of Open\+S\+S\+L E\+N\+G\+I\+N\+E callback functions for E\+C\+C and R\+S\+A key management. See reference code at ec\+\_\+pmeth.\+c and crypto/evp/evp\+\_\+locl.\+h.  


{\ttfamily \#include $<$stdint.\+h$>$}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$openssl/engine.\+h$>$}\\*
{\ttfamily \#include $<$openssl/ec.\+h$>$}\\*
{\ttfamily \#include $<$openssl/pem.\+h$>$}\\*
{\ttfamily \#include $<$crypto/ec/ec\+\_\+lcl.\+h$>$}\\*
{\ttfamily \#include $<$crypto/evp/evp.\+h$>$}\\*
{\ttfamily \#include $<$crypto/evp/evp\+\_\+locl.\+h$>$}\\*
{\ttfamily \#include $<$crypto/asn1/asn1\+\_\+locl.\+h$>$}\\*
{\ttfamily \#include $<$crypto/ossl\+\_\+typ.\+h$>$}\\*
{\ttfamily \#include \char`\"{}ecc\+\_\+meth.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
E\+V\+P\+\_\+\+P\+K\+E\+Y $\ast$ \hyperlink{eccx08__eckey__meth_8c_acfbe8b95fcf980bbdf36572e2af2d77b}{eccx08\+\_\+load\+\_\+privkey} (E\+N\+G\+I\+N\+E $\ast$e, const char $\ast$file, U\+I\+\_\+\+M\+E\+T\+H\+O\+D $\ast$ui\+\_\+method, void $\ast$callback\+\_\+data)
\begin{DoxyCompactList}\small\item\em Allocates the E\+V\+P\+\_\+\+P\+K\+E\+Y structure, decrypt the R\+S\+A private key, and load it to the allocated E\+V\+P\+\_\+\+P\+K\+E\+Y structure. The encryption key is retrieved from the E\+C\+C\+X08 chip. See the eccx08\+\_\+rsa\+\_\+keygen() function from the \hyperlink{eccx08__rsa__meth_8c}{eccx08\+\_\+rsa\+\_\+meth.\+c} file for details. \end{DoxyCompactList}\item 
E\+V\+P\+\_\+\+P\+K\+E\+Y $\ast$ \hyperlink{eccx08__eckey__meth_8c_a254de9850cd87bae1f98220f5570ec7a}{eccx08\+\_\+load\+\_\+pubkey} (E\+N\+G\+I\+N\+E $\ast$e, const char $\ast$key\+\_\+id, U\+I\+\_\+\+M\+E\+T\+H\+O\+D $\ast$ui\+\_\+method, void $\ast$callback\+\_\+data)
\begin{DoxyCompactList}\small\item\em Allocates the E\+V\+P\+\_\+\+P\+K\+E\+Y structure and load there an E\+C\+C public key returned by the E\+C\+C\+X08 chip. \end{DoxyCompactList}\item 
int \hyperlink{eccx08__eckey__meth_8c_aa5a6b44ea3b640e445d6d1549137eee8}{eccx08\+\_\+pkey\+\_\+meth\+\_\+f} (E\+N\+G\+I\+N\+E $\ast$e, E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D $\ast$$\ast$pkey\+\_\+meth, const int $\ast$$\ast$nids, int nid)
\begin{DoxyCompactList}\small\item\em Initialize the E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D method callback for ateccx08 engine. Just returns a pointer to E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D eccx08\+\_\+pkey\+\_\+meth. \end{DoxyCompactList}\item 
int \hyperlink{eccx08__eckey__meth_8c_a54dafadc94aa3a1120734bbb4a8b06d6}{eccx08\+\_\+pkey\+\_\+meth\+\_\+init} (void)
\begin{DoxyCompactList}\small\item\em Initialize the E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D method for ateccx08 engine. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{eccx08__eckey__meth_8c_a6c877a4fa5174f13d0335ef73a40cb1b}{}const E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+A\+S\+N1\+\_\+\+M\+E\+T\+H\+O\+D {\bfseries eckey\+\_\+asn1\+\_\+meth}\label{eccx08__eckey__meth_8c_a6c877a4fa5174f13d0335ef73a40cb1b}

\item 
\hypertarget{eccx08__eckey__meth_8c_a62b0a4af9c1f477f8af756fc0cbdec44}{}E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D \hyperlink{eccx08__eckey__meth_8c_a62b0a4af9c1f477f8af756fc0cbdec44}{eccx08\+\_\+pkey\+\_\+meth}\label{eccx08__eckey__meth_8c_a62b0a4af9c1f477f8af756fc0cbdec44}

\begin{DoxyCompactList}\small\item\em eccx08\+\_\+pkey\+\_\+meth is an Open\+S\+S\+L E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D structure specific to the ateccx08 engine. See the crypto/evp/evp\+\_\+locl.\+h and crypto/ec/ec\+\_\+pmeth.\+c files for details on the E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D structure (struct evp\+\_\+pkey\+\_\+method\+\_\+st). \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Implementation of Open\+S\+S\+L E\+N\+G\+I\+N\+E callback functions for E\+C\+C and R\+S\+A key management. See reference code at ec\+\_\+pmeth.\+c and crypto/evp/evp\+\_\+locl.\+h. 

Copyright (c) 2015 Atmel Corporation. All rights reserved.

\subsection{Function Documentation}
\hypertarget{eccx08__eckey__meth_8c_acfbe8b95fcf980bbdf36572e2af2d77b}{}\index{eccx08\+\_\+eckey\+\_\+meth.\+c@{eccx08\+\_\+eckey\+\_\+meth.\+c}!eccx08\+\_\+load\+\_\+privkey@{eccx08\+\_\+load\+\_\+privkey}}
\index{eccx08\+\_\+load\+\_\+privkey@{eccx08\+\_\+load\+\_\+privkey}!eccx08\+\_\+eckey\+\_\+meth.\+c@{eccx08\+\_\+eckey\+\_\+meth.\+c}}
\subsubsection[{eccx08\+\_\+load\+\_\+privkey(\+E\+N\+G\+I\+N\+E $\ast$e, const char $\ast$file, U\+I\+\_\+\+M\+E\+T\+H\+O\+D $\ast$ui\+\_\+method, void $\ast$callback\+\_\+data)}]{\setlength{\rightskip}{0pt plus 5cm}E\+V\+P\+\_\+\+P\+K\+E\+Y$\ast$ eccx08\+\_\+load\+\_\+privkey (
\begin{DoxyParamCaption}
\item[{E\+N\+G\+I\+N\+E $\ast$}]{e, }
\item[{const char $\ast$}]{file, }
\item[{U\+I\+\_\+\+M\+E\+T\+H\+O\+D $\ast$}]{ui\+\_\+method, }
\item[{void $\ast$}]{callback\+\_\+data}
\end{DoxyParamCaption}
)}\label{eccx08__eckey__meth_8c_acfbe8b95fcf980bbdf36572e2af2d77b}


Allocates the E\+V\+P\+\_\+\+P\+K\+E\+Y structure, decrypt the R\+S\+A private key, and load it to the allocated E\+V\+P\+\_\+\+P\+K\+E\+Y structure. The encryption key is retrieved from the E\+C\+C\+X08 chip. See the eccx08\+\_\+rsa\+\_\+keygen() function from the \hyperlink{eccx08__rsa__meth_8c}{eccx08\+\_\+rsa\+\_\+meth.\+c} file for details. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em e} & -\/ a pointer to the engine (ateccx08 in our case). \\
\hline
\mbox{\tt in}  & {\em file} & -\/ the file name associated with the private key \\
\hline
\mbox{\tt in}  & {\em ui\+\_\+method} & -\/ a pointer to the U\+I\+\_\+\+M\+E\+T\+H\+O\+D structure (not used by the ateccx08 engine) \\
\hline
\mbox{\tt in}  & {\em callback\+\_\+data} & -\/ an optional parameter to provide the callback data (not used by the ateccx08 engine) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+V\+P\+\_\+\+P\+K\+E\+Y for success, N\+U\+L\+L otherwise 
\end{DoxyReturn}
\hypertarget{eccx08__eckey__meth_8c_a254de9850cd87bae1f98220f5570ec7a}{}\index{eccx08\+\_\+eckey\+\_\+meth.\+c@{eccx08\+\_\+eckey\+\_\+meth.\+c}!eccx08\+\_\+load\+\_\+pubkey@{eccx08\+\_\+load\+\_\+pubkey}}
\index{eccx08\+\_\+load\+\_\+pubkey@{eccx08\+\_\+load\+\_\+pubkey}!eccx08\+\_\+eckey\+\_\+meth.\+c@{eccx08\+\_\+eckey\+\_\+meth.\+c}}
\subsubsection[{eccx08\+\_\+load\+\_\+pubkey(\+E\+N\+G\+I\+N\+E $\ast$e, const char $\ast$key\+\_\+id, U\+I\+\_\+\+M\+E\+T\+H\+O\+D $\ast$ui\+\_\+method, void $\ast$callback\+\_\+data)}]{\setlength{\rightskip}{0pt plus 5cm}E\+V\+P\+\_\+\+P\+K\+E\+Y$\ast$ eccx08\+\_\+load\+\_\+pubkey (
\begin{DoxyParamCaption}
\item[{E\+N\+G\+I\+N\+E $\ast$}]{e, }
\item[{const char $\ast$}]{key\+\_\+id, }
\item[{U\+I\+\_\+\+M\+E\+T\+H\+O\+D $\ast$}]{ui\+\_\+method, }
\item[{void $\ast$}]{callback\+\_\+data}
\end{DoxyParamCaption}
)}\label{eccx08__eckey__meth_8c_a254de9850cd87bae1f98220f5570ec7a}


Allocates the E\+V\+P\+\_\+\+P\+K\+E\+Y structure and load there an E\+C\+C public key returned by the E\+C\+C\+X08 chip. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em e} & -\/ a pointer to the engine (ateccx08 in our case). \\
\hline
\mbox{\tt in}  & {\em key\+\_\+id} & -\/ a string for key I\+D (not used by the ateccx08 engine) \\
\hline
\mbox{\tt in}  & {\em ui\+\_\+method} & -\/ a pointer to the U\+I\+\_\+\+M\+E\+T\+H\+O\+D structure (not used by the ateccx08 engine) \\
\hline
\mbox{\tt in}  & {\em callback\+\_\+data} & -\/ an optional parameter to provide the callback data (not used by the ateccx08 engine) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+V\+P\+\_\+\+P\+K\+E\+Y for success, N\+U\+L\+L otherwise 
\end{DoxyReturn}
\hypertarget{eccx08__eckey__meth_8c_aa5a6b44ea3b640e445d6d1549137eee8}{}\index{eccx08\+\_\+eckey\+\_\+meth.\+c@{eccx08\+\_\+eckey\+\_\+meth.\+c}!eccx08\+\_\+pkey\+\_\+meth\+\_\+f@{eccx08\+\_\+pkey\+\_\+meth\+\_\+f}}
\index{eccx08\+\_\+pkey\+\_\+meth\+\_\+f@{eccx08\+\_\+pkey\+\_\+meth\+\_\+f}!eccx08\+\_\+eckey\+\_\+meth.\+c@{eccx08\+\_\+eckey\+\_\+meth.\+c}}
\subsubsection[{eccx08\+\_\+pkey\+\_\+meth\+\_\+f(\+E\+N\+G\+I\+N\+E $\ast$e, E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D $\ast$$\ast$pkey\+\_\+meth, const int $\ast$$\ast$nids, int nid)}]{\setlength{\rightskip}{0pt plus 5cm}int eccx08\+\_\+pkey\+\_\+meth\+\_\+f (
\begin{DoxyParamCaption}
\item[{E\+N\+G\+I\+N\+E $\ast$}]{e, }
\item[{E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D $\ast$$\ast$}]{pkey\+\_\+meth, }
\item[{const int $\ast$$\ast$}]{nids, }
\item[{int}]{nid}
\end{DoxyParamCaption}
)}\label{eccx08__eckey__meth_8c_aa5a6b44ea3b640e445d6d1549137eee8}


Initialize the E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D method callback for ateccx08 engine. Just returns a pointer to E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D eccx08\+\_\+pkey\+\_\+meth. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em e} & -\/ a pointer to the engine (ateccx08 in our case). \\
\hline
\mbox{\tt out}  & {\em pkey\+\_\+meth} & -\/ a double pointer to E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D to return the E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D eccx08\+\_\+pkey\+\_\+meth \\
\hline
\mbox{\tt out}  & {\em nids} & -\/ a double pointer to return an array of nid\textquotesingle{}s (we return 0) \\
\hline
\mbox{\tt in}  & {\em nid} & -\/ a number of expected nid\textquotesingle{}s (we ignore this parameter) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 for success 
\end{DoxyReturn}
\hypertarget{eccx08__eckey__meth_8c_a54dafadc94aa3a1120734bbb4a8b06d6}{}\index{eccx08\+\_\+eckey\+\_\+meth.\+c@{eccx08\+\_\+eckey\+\_\+meth.\+c}!eccx08\+\_\+pkey\+\_\+meth\+\_\+init@{eccx08\+\_\+pkey\+\_\+meth\+\_\+init}}
\index{eccx08\+\_\+pkey\+\_\+meth\+\_\+init@{eccx08\+\_\+pkey\+\_\+meth\+\_\+init}!eccx08\+\_\+eckey\+\_\+meth.\+c@{eccx08\+\_\+eckey\+\_\+meth.\+c}}
\subsubsection[{eccx08\+\_\+pkey\+\_\+meth\+\_\+init(void)}]{\setlength{\rightskip}{0pt plus 5cm}int eccx08\+\_\+pkey\+\_\+meth\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{eccx08__eckey__meth_8c_a54dafadc94aa3a1120734bbb4a8b06d6}


Initialize the E\+V\+P\+\_\+\+P\+K\+E\+Y\+\_\+\+M\+E\+T\+H\+O\+D method for ateccx08 engine. 

\begin{DoxyReturn}{Returns}
1 for success 
\end{DoxyReturn}
